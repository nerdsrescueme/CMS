(function(a,b){console.log(this);String.prototype.despace=function(){return this.split(" ").join("")};String.prototype.untitleize=function(){return this.charAt(0).toLowerCase()+this.slice(1)};this.Nerd||(this.Nerd={});b.extend(this.Nerd,{version:"0.0.1",regions:[],handlers:[],Editor:{},Commands:{},Keybinds:{}});var c=a.document,d=a.navigator,e=a.location,f=a.top;N=this.Nerd;N.trigger=function(a,b){this[a](b)};N.initialize=function(a){N.Editor.initialize()};N.Editor.parent=N;N.Editor.activate=function(){this.style=b('<style type="text/css"></style>').text('[contenteditable="true"] { box-shadow: 0 0 8px lightblue; }').appendTo(this.ihead);this.parent.regions.attr("contentEditable","true")};N.activate=function(){this.Editor.activate()};N.Editor.deactivate=function(){this.style.remove();this.parent.regions.attr("contentEditable","false")};N.deactivate=function(){N.Editor.activate()};N.Editor.initialize=function(){var a=b("body").html(),c="";this.body=b("body").html('<div id="nerd-toolbar">Test</div><div id="nerd-buttons"></div>');this.toolbar=b("#nerd-toolbar");this.buttons=b("#nerd-buttons");this.iframe=this.parent.iframe=b('<iframe src="about:blank" id="nerd-frame">').appendTo(this.body);this.ihead=this.iframe.contents().find("head");this.ibody=this.iframe.contents().find("body").html(a);this.idoc=this.parent.idoc=this.iframe.get(0).contentDocument;this.toolbar.on("click","[data-function]",function(a){return false});this.parent.Commands.initialize();b(this.parent.buttons).each(function(a,b){c+='<a href="#" title="'+b[0]+'" class="sprite '+b[2]+'" data-function="'+b[1].despace().untitleize()+'"></a>'});this.buttons.append(c).on("click","[data-function]",function(a){var c=b(this),d=c.data("function");N.Commands[d]();return false});this.parent.regions=this.ibody.find("[data-editable]");this.parent.trigger("activate")};N.Keybinds={initialize:function(){},13:function(){this.exec("insertparagraph")}};N.Commands={parent:N,initialize:function(){this.exec("multipleselection",false,false)},exec:function(a,b,c){return N.idoc.execCommand(a,b,c)},anchor:function(){var a=prompt("What do we call it?");if(a===null)return;this.exec("createbookmark",false,a)},block:function(){var a=prompt("What kind of block?");if(a===null)return;this.exec("formatblock",false,a)},bold:function(){this.exec("bold")},clear:function(){this.exec("delete")},clearanchor:function(){this.exec("unbookmark")},clearformat:function(){this.exec("removeformat")},clearlink:function(){this.exec("unlink")},copy:function(){this.exec("copy")},cut:function(){this.exec("cut")},hr:function(){this.exec("inserthorizontalrule")},image:function(){var a=prompt("Where is the image?");if(a===null)return;this.exec("insertimage")},indent:function(){this.exec("indent")},inject:function(){this.exec("inserthtml",false,"<strong>Copy</strong>")},italic:function(){this.exec("italic")},justifyleft:function(){this.exec("justifyleft")},justifycenter:function(){this.exec("justifycenter")},justifyright:function(){this.exec("justifyright")},link:function(){var a=prompt("Where do we point the link to?");if(a===null)return;this.exec("createlink",false,a)},ol:function(){this.exec("insertorderedlist")},outdent:function(){this.exec("outdent")},paste:function(){this.exec("paste")},print:function(){this.exec("print")},ul:function(){this.exec("insertunorderedlist")},underline:function(){this.exec("underline")},undo:function(){this.exec("undo")}}})(window,$)